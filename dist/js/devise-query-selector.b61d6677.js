(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["devise-query-selector"],{a501:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"dvs-flex dvs-justify-center dvs-p-4 dvs-pb-8  dvs-text-admin-fg  dvs-w-full"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],ref:"filter",staticClass:"dvs-bg-transparent dvs-border-b-2 dvs-px-12 dvs-py-2 dvs-text-admin-fg dvs-outline-none dvs-placeholder-admin-fg dvs-text-center",attrs:{type:"text",placeholder:e.value.label},domProps:{value:e.filter},on:{keyup:e.requestSearch,input:function(t){t.target.composing||(e.filter=t.target.value)}}}),s("div",{staticClass:"dvs-cursor-pointer",class:{"dvs-opacity-50":""===e.filter},on:{click:function(t){e.filter=""}}},[s("x-icon")],1)]),s("ul",{staticClass:"dvs-list-reset"},e._l(e.filteredSuggestions,function(t,r){return s("li",{key:r,staticClass:"dvs-bg-admin-bg dvs-shadow hover:dvs-shadow-lg dvs-rounded dvs-my-4 dvs-p-2 dvs-cursor-pointer",on:{click:function(s){return e.selectSuggestion(t)}}},[s("div",{staticClass:"dvs-text-lg dvs-mb-2"},[e._v(e._s(t.displayFields[0].value))]),s("ul",{staticClass:"dvs-list-reset dvs-flex"},e._l(e.subLabelFields(t.displayFields),function(t,r){return s("li",{key:r,staticClass:"dvs-mr-4 dvs-text-xs dvs-leading-tight"},[s("div",{staticClass:"dvs-uppercase dvs-text-xs dvs-text-admin-secondary-fg"},[e._v(e._s(t.label))]),s("div",[e._v(e._s(t.value))])])}),0)])}),0),s("draggable",e._b({staticClass:"dvs-list-reset",attrs:{list:e.selected,tag:"ul"},on:{change:e.update}},"draggable",{group:{name:"g1"},animation:200,ghostClass:"dvs-ghost",handle:".handle",dragClass:"dvs-chosen-drag-slice",emptyInsertThreshold:10,removeCloneOnHide:!1},!1),e._l(e.selected,function(t,r){return s("li",{key:r,staticClass:"dvs-bg-admin-secondary-bg dvs-text-admin-secondary-fg dvs-rounded dvs-my-4 dvs-p-2 dvs-flex"},[e.value.allowSort?s("div",{staticClass:"dvs-mr-4 handle"},[s("menu-icon")],1):e._e(),s("div",{staticClass:"dvs-w-full"},[s("div",{staticClass:"dvs-text-lg dvs-mb-2"},[e._v(e._s(t.displayFields[0].value))]),s("ul",{staticClass:"dvs-list-reset dvs-flex"},e._l(e.subLabelFields(t.displayFields),function(t,r){return s("li",{key:r,staticClass:"dvs-mr-4 dvs-text-xs dvs-leading-tight"},[s("div",{staticClass:"dvs-uppercase dvs-text-xs dvs-text-admin-secondary-fg"},[e._v(e._s(t.label))]),s("div",[e._v(e._s(t.value))])])}),0)]),s("div",{staticClass:"dvs-cursor-pointer",on:{click:function(s){return e.removeSuggestion(t)}}},[s("x-icon")],1)])}),0)],1)},a=[],l=(s("8e6e"),s("456d"),s("ac6a"),s("bd86")),n=(s("7514"),s("2f62"));function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(s,!0).forEach(function(t){Object(l["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var o={name:"DeviseQuerySelectorSearch",components:{draggable:function(){return s.e("devise-editors").then(s.t.bind(null,"310e",7))}},props:{value:{type:Object,required:!0}},computed:{filteredSuggestions:function(){var e=this;return this.autosuggest.data?this.autosuggest.data.filter(function(t){return!e.selected.find(function(e){return t.value===e.value})}):[]}},data:function(){return{filter:null,autosuggest:{data:[]},selected:[]}},methods:u({},Object(n["b"])("devise",["appGenericSearch"]),{update:function(){var e=this.value;e.value=[],this.selected.forEach(function(t){e.value.push(t.value)}),this.$emit("input",e)},selectSuggestion:function(e){this.selected.push(e),this.update()},removeSuggestion:function(e){this.resetSearch(),this.selected.splice(this.selected.indexOf(e),1)},resetSearch:function(){this.filter=null,this.autosuggest.data=[]},requestSearch:function(e){var t=this,s=e.target.value;if(""!==s){var r={searchterm:s};this.appGenericSearch({config:{apiendpoint:this.value.api},filters:r}).then(function(e){t.autosuggest=e.data,e.data.length<1&&window.deviseSettings.$bus.$emit("showMessage",{title:"No Suggestions Found",message:"We couldn't find any data with the term: \"".concat(s,'".')})})}else this.autosuggest=Object.assign({},{})},subLabelFields:function(e){var t=JSON.parse(JSON.stringify(e));return t.shift(),t}})},c=o,d=s("2877"),v=Object(d["a"])(c,r,a,!1,null,null,null);t["default"]=v.exports},bce6:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("fieldset",{staticClass:"dvs-fieldset"},[s("label",[e._v(e._s(e.value.label))]),s("select",{staticClass:"dvs-w-full",attrs:{type:"text",placeholder:e.value.label},domProps:{value:e.value.value},on:{change:e.updateValue}},[s("option",{domProps:{value:null}},[e._v("Please Select from the Following")]),e._l(e.options,function(t,r){return s("option",{key:r,domProps:{value:r}},[e._v("\n        "+e._s(t)+"\n      ")])})],2)])])},a=[],l=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=s("2f62");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(s,!0).forEach(function(t){Object(l["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var o={name:"DeviseQuerySelectorSelect",props:{value:{type:Object,required:!0}},data:function(){return{apiOptions:[]}},computed:{options:function(){return this.value.options?this.value.options:this.apiOptions}},mounted:function(){this.value.value=null,this.value.api&&this.requestOptions()},methods:u({},Object(n["b"])("devise",["getGeneric"]),{updateValue:function(e){var t=this.value;t.value=e.target.value,this.$emit("input",t)},requestOptions:function(){var e=this;this.getGeneric({config:{app:!0,apiendpoint:this.value.api}}).then(function(t){e.apiOptions=t.data})}})},c=o,d=s("2877"),v=Object(d["a"])(c,r,a,!1,null,null,null);t["default"]=v.exports},dd2b:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("fieldset",{staticClass:"dvs-fieldset"},[s("label",[e._v(e._s(e.value.label))]),s("input",{staticClass:"dvs-w-full",attrs:{type:"text",placeholder:e.value.label},on:{keyup:e.updateValue}})])])},a=[],l={name:"DeviseQuerySelectorText",props:{value:{type:Object,required:!0}},methods:{updateValue:function(e){var t=this.value;t.value=e.target.value,this.$emit("input",t)}}},n=l,i=s("2877"),u=Object(i["a"])(n,r,a,!1,null,null,null);t["default"]=u.exports},dda1:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("fieldset",{staticClass:"dvs-fieldset"},[s("label",[e._v(e._s(e.value.label))]),s("date-picker",{ref:"datepicker",attrs:{settings:{date:!0,time:!0}},on:{change:e.updateValue}})],1)])},a=[],l={name:"DeviseQuerySelectorText",components:{DatePicker:function(){return s.e("devise-editors").then(s.bind(null,"7e6e"))}},props:{value:{type:Object,required:!0}},methods:{updateValue:function(e){var t=this.value;t.value=e,this.$emit("input",t)}}},n=l,i=s("2877"),u=Object(i["a"])(n,r,a,!1,null,null,null);t["default"]=u.exports},e9bb:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dvs-text-admin-fg"},[s("fieldset",{staticClass:"dvs-fieldset"},[s("label",{attrs:{for:"querykey"}},[e._v("Data Set Query")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.query.key,expression:"query.key"}],staticClass:"w-full",attrs:{name:"querykey",id:"querykey"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.query,"key",t.target.multiple?s:s[0])}}},[s("option",{attrs:{disabled:""},domProps:{value:null}},[e._v("\n        Please Select a Data Set Query\n      ")]),e._l(e.modelQueries,function(t){return s("option",{key:t.key,domProps:{value:t.key}},[e._v(e._s(t.description))])})],2)]),e.selectedModelQuery&&e.selectedModelQuery.params.length>0?s("div",{staticClass:"dvs-mt-6"},e._l(e.selectedModelQuery.params,function(t,r){return s("div",{key:r},["search"===t.type?s("param-search",{model:{value:e.selectedModelQuery.params[r],callback:function(t){e.$set(e.selectedModelQuery.params,r,t)},expression:"selectedModelQuery.params[key]"}}):e._e(),"text"===t.type?s("param-text",{staticClass:"dvs-mb-4",model:{value:e.selectedModelQuery.params[r],callback:function(t){e.$set(e.selectedModelQuery.params,r,t)},expression:"selectedModelQuery.params[key]"}}):e._e(),"select"===t.type?s("param-select",{staticClass:"dvs-mb-4",model:{value:e.selectedModelQuery.params[r],callback:function(t){e.$set(e.selectedModelQuery.params,r,t)},expression:"selectedModelQuery.params[key]"}}):e._e(),"datetime"===t.type?s("param-datetime",{staticClass:"dvs-mb-4",model:{value:e.selectedModelQuery.params[r],callback:function(t){e.$set(e.selectedModelQuery.params,r,t)},expression:"selectedModelQuery.params[key]"}}):e._e()],1)}),0):e._e()])},a=[],l=(s("8e6e"),s("456d"),s("7514"),s("bd86")),n=(s("ac6a"),s("2f62"));function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(s,!0).forEach(function(t){Object(l["a"])(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(s).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var o={name:"QuerySelector",components:{ParamDatetime:function(){return Promise.resolve().then(s.bind(null,"dda1"))},ParamSearch:function(){return Promise.resolve().then(s.bind(null,"a501"))},ParamSelect:function(){return Promise.resolve().then(s.bind(null,"bce6"))},ParamText:function(){return Promise.resolve().then(s.bind(null,"dd2b"))}},props:{value:{}},watch:{selectedModelQuery:{handler:function(e){var t=[];e.params.forEach(function(e){t.push(e.value)});var s={key:e.key,params:t};this.$emit("input",s)},deep:!0}},computed:u({},Object(n["e"])("devise",["modelQueries"]),{selectedModelQuery:function(){var e=this;return this.modelQueries.find(function(t){return t.key===e.query.key})}}),data:function(){return{query:{key:null,params:[]},modelQuery:{}}}},c=o,d=s("2877"),v=Object(d["a"])(c,r,a,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=devise-query-selector.b61d6677.js.map