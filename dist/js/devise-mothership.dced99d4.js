(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["devise-mothership"],{"6e12":function(e,t,s){"use strict";var a=s("5a0c"),n=s.n(a);t["a"]={methods:{formatDate:function(e){return n()(e).format("YYYY-MM-DD")}}}},"6e8f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dvs-p-8"},[s("h3",{staticClass:"mb-6"},[e._v("Mothership")]),s("div",{attrs:{id:"devise-admin-content"}},[e._v("\n        It's time to make some changes\n    ")])])}],i=s("cebc"),l=s("2f62"),o={name:"MothershipChanges",data:function(){return{analytics:null,minimized:!1,localValue:null}},mounted:function(){this.retrieveChanges()},methods:Object(i["a"])({},Object(l["b"])("devise",["getPendingChanges"]),{retrieveChanges:function(){var e=this;this.getPendingChanges().then(function(t){e.$set(e,"localValue",t.data)})}}),computed:Object(i["a"])({},Object(l["c"])("devise",["changes"]))},r=o,c=s("0c7c"),d=Object(c["a"])(r,a,n,!1,null,null,null);t["default"]=d.exports},7980:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"devise-admin-content"}},[s("action-bar",[s("li",{staticClass:"dvs-btn dvs-btn-sm dvs-mb-2",style:e.theme.actionButton,on:{click:function(t){return t.preventDefault(),e.showCreateForm()}}},[e._v("Create New Release")])]),s("h2",{staticClass:"dvs-mb-10"},[e._v("Releases")]),e._l(e.pushedReleases,function(t){return s("div",{key:t.id,staticClass:"dvs-mb-6 dvs-flex dvs-justify-between dvs-items-center"},[s("div",{staticClass:"dvs-min-w-2/5 dvs-font-bold dvs-pr-8"},[e._v(e._s(t.message))]),s("div",{staticClass:"dvs-min-w-1/5 dvs-text-sm dvs-px-8 dvs-font-mono"},[e._v(e._s(e.trucatedHash(t.commit_hash)))]),s("div",{staticClass:"dvs-w-2/5 dvs-px-8 dvs-flex dvs-justify-end"},[e.releaseWasPulled(t.id)?s("button",{staticClass:"dvs-btn dvs-btn-xs dvs-mr-2",style:e.theme.actionButtonGhost},[e._v("Pulled")]):s("button",{staticClass:"dvs-btn dvs-btn-xs dvs-mr-2",style:e.theme.actionButtonGhost,on:{click:function(s){return e.pullRelease(t.id)}}},[e._v("Pull")])])])}),e.releasesLoaded&&0===e.pushedReleases.length?s("div",[s("p",[e._v("Mothership releases has not been initiated.")]),s("button",{staticClass:"dvs-btn dvs-block dvs-w-full",style:e.theme.actionButton,on:{click:function(t){return t.preventDefault(),e.initiateReleases(!1)}}},[e._v("Initiate Mothership Releases")])]):e._e()],2),s("transition",{attrs:{name:"dvs-fade"}},[s("portal",{attrs:{to:"devise-root"}},[e.showCreate?s("devise-modal",{staticClass:"dvs-z-50",on:{close:function(t){e.showCreate=!1}}},[s("h3",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("Create New Release")]),e._l(e.recentUpdates,function(t){return s("div",{key:t.id,staticClass:"dvs-mb-6 dvs-items-center"},[s("div",{staticClass:"dvs-w-full dvs-font-bold dvs-pr-8"},[s("label",[s("input",{attrs:{type:"checkbox"}}),e._v("\n              "+e._s(t.model)+"\n            ")])]),e._l(t.changes,function(t){return s("div",{key:t.id,staticClass:"dvs-w-full dvs-mb-6 dvs-mt-6 dvs-flex dvs-justify-between dvs-items-center"},[s("div",{staticClass:"dvs-min-w-2/5 dvs-font-bold dvs-pr-8"},[e._v(e._s(t.description))]),s("div",{staticClass:"dvs-min-w-1/5 dvs-text-sm dvs-px-8 dvs-font-mono"},[e._v(e._s(t.updated_at))])])})],2)}),s("fieldset",{staticClass:"dvs-fieldset dvs-mb-4"},[s("label",[e._v("Message")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newRelease.message,expression:"newRelease.message"}],attrs:{type:"text",placeholder:"Release Message"},domProps:{value:e.newRelease.message},on:{input:function(t){t.target.composing||e.$set(e.newRelease,"message",t.target.value)}}})]),s("button",{staticClass:"dvs-btn",style:e.theme.actionButton,attrs:{disabled:e.createInvalid},on:{click:e.requestCreateRelease}},[e._v("Create")]),s("button",{staticClass:"dvs-btn",style:e.theme.actionButtonGhost,on:{click:function(t){e.showCreate=!1}}},[e._v("Cancel")])],2):e._e()],1)],1)],1)},n=[],i=s("cebc"),l=s("2f62"),o={name:"MothershipReleases",data:function(){return{showCreate:!1,releasesLoaded:!1,pushedReleases:[],pulledReleases:[],newRelease:{message:null,ids:[]},recentUpdates:[]}},mounted:function(){this.fetchAllReleases()},methods:Object(i["a"])({},Object(l["b"])("devise",["getPushedReleases","getPulledReleases","getPendingChanges","initReleases"]),{fetchAllReleases:function(){var e=this;this.getPulledReleases().then(function(t){e.pulledReleases=t.data,e.getPushedReleases().then(function(t){e.pushedReleases=t.data,e.releasesLoaded=!0})})},initiateReleases:function(e){var t=this;this.initReleases(e).then(function(e){e.hasOwnProperty("response")&&422===e.response.status?t.showForceRequiredMessage():t.fetchAllReleases()})},showForceRequiredMessage:function(){var e=confirm("You have uncommitted changes. Are you sure you want to create a release without committing your source?");e&&this.initiateReleases(!0)},trucatedHash:function(e){return"".concat(e.substring(0,6),"...")},releaseWasPulled:function(e){return this.pulledReleases.indexOf(e)>-1},pullRelease:function(e){console.log("go")},showCreateForm:function(){this.showCreate=!0,this.loadPendingChanges()},loadPendingChanges:function(){var e=this;e.getPendingChanges().then(function(t){e.recentUpdates=t.data.data})},requestCreateRelease:function(){console.log("go")}}),computed:{createInvalid:function(){return null===this.newRelease.message}},components:{ActionBar:function(){return s.e("devise-utilities").then(s.bind(null,"f8ec"))},DeviseModal:function(){return s.e("devise-utilities").then(s.bind(null,"025b"))}}},r=o,c=s("0c7c"),d=Object(c["a"])(r,a,n,!1,null,null,null);t["default"]=d.exports},"82ca":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"dvs-relative dvs-full",attrs:{id:"devise-admin-content"}},[null!==e.site?s("div",{staticClass:"dvs-p-8"},[s("h2",{staticClass:"dvs-mb-8",style:{color:e.theme.panel.color}},[e._v(e._s(e.site.name)+" Analytics")]),s("div",{staticClass:"dvs-flex dvs-mb-8"},[s("fieldset",{staticClass:"dvs-fieldset mr-8"},[s("label",[e._v("Analytics Start Date")]),s("date-picker",{attrs:{settings:{date:!0,time:!1},placeholder:"Start Date"},on:{update:function(t){return e.retrieveAnalytics()}},model:{value:e.analyticsDateRange.start,callback:function(t){e.$set(e.analyticsDateRange,"start",t)},expression:"analyticsDateRange.start"}})],1),s("fieldset",{staticClass:"dvs-fieldset"},[s("label",[e._v("Analytics End Date")]),s("date-picker",{attrs:{settings:{date:!0,time:!1},placeholder:"End Date"},on:{update:function(t){return e.retrieveAnalytics()}},model:{value:e.analyticsDateRange.end,callback:function(t){e.$set(e.analyticsDateRange,"end",t)},expression:"analyticsDateRange.end"}})],1)]),null!==e.analytics?[s("div",{staticClass:"dvs-flex dvs-justify-between dvs-text-center dvs-text-xs dvs-mb-8"},[s("div",{staticClass:"dvs-rounded-sm dvs-p-4 dvs-w-1/5",style:e.theme.actionButton},[s("h2",{staticClass:"dvs-font-bold",style:{color:e.theme.actionButton.color}},[e._v(e._s(e.analytics["usage-totals"].Users))]),s("strong",{staticClass:"dvs-uppercase"},[e._v("Users")])]),s("div",{staticClass:"dvs-rounded-sm dvs-p-4 dvs-w-1/5",style:e.theme.actionButton},[s("h2",{style:{color:e.theme.actionButton.color}},[e._v(e._s(e.analytics["usage-totals"].Sessions))]),s("strong",{staticClass:"dvs-uppercase"},[e._v("Sessions")])]),s("div",{staticClass:"dvs-rounded-sm dvs-p-4 dvs-w-1/5",style:e.theme.actionButton},[s("h2",{style:{color:e.theme.actionButton.color}},[e._v(e._s(e.analytics["usage-totals"]["Page Views"]))]),s("strong",{staticClass:"dvs-uppercase"},[e._v("Page Views")])]),s("div",{staticClass:"dvs-rounded-sm dvs-p-4 dvs-w-1/5",style:e.theme.actionButton},[s("h2",{style:{color:e.theme.actionButton.color}},[e._v(e._s(e.analytics["usage-totals"]["Bounce Rate"]))]),s("strong",{staticClass:"dvs-uppercase"},[e._v("Bounce Rate")])])]),s("div",{staticClass:"dvs-flex dvs-flex-col lg:dvs-flex-row dvs-mb-8"},[s("div",{staticClass:"lg:dvs-w-1/2 lg:dvs-pr-10"},[s("div",{staticClass:"dvs-mb-16"},[s("h4",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("How are site sessions trending?")]),s("line-chart",{staticClass:"dvs-mb-8",attrs:{"chart-data":e.analytics.sessions,options:e.options}})],1),s("div",{staticClass:"dvs-mb-16"},[s("h4",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("Channels")]),s("div",[s("bar-chart",{staticClass:"dvs-mb-8",attrs:{"chart-data":e.analytics.channels,options:e.barOptions}})],1)]),s("div",{staticClass:"dvs-mb-8"},[s("h4",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("Channels")]),s("div",[s("pie-chart",{staticClass:"dvs-mb-8",attrs:{"chart-data":e.analytics.browser,options:e.pieOptions}})],1)])]),s("div",{staticClass:"lg:dvs-w-1/2 dvs-p-8 dvs-rounded dvs-shadow-lg",style:e.theme.panelCard},[s("div",{staticClass:"dvs-mb-8"},[s("h4",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("What are the top countries by sessions?")]),s("simple-table",{staticClass:"dvs-w-full",attrs:{data:e.analytics.countries,columns:[{name:"Country"},{name:"Sessions",property:"Sessions"}]}})],1),s("div",{staticClass:"dvs-mb-8"},[s("simple-table",{staticClass:"dvs-w-full",attrs:{data:e.analytics.regions,columns:[{name:"Region"},{name:"Sessions",property:"Sessions"}]}})],1)])]),s("div",{staticClass:"dvs-mb-8"},[s("h4",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("Acquisition Sources")]),s("simple-table",{staticClass:"dvs-w-full",attrs:{data:e.analytics["sources-sessions-pageviews"],columns:[{name:"Acquisition Source"},{name:"Sessions",property:"Sessions"},{name:"Pages / Sessions",property:"Pages Per Session"}]}})],1),s("div",{staticClass:"dvs-mb-8"},[s("h4",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("Date Searched")]),s("simple-table",{staticClass:"dvs-w-full",attrs:{data:e.analytics["date-searched"],columns:[{name:"Date Searched"},{name:"Sessions",property:"Sessions"}]}})],1),s("div",{staticClass:"dvs-mb-8"},[s("h4",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("Landing Page")]),s("simple-table",{staticClass:"dvs-w-full",attrs:{data:e.analytics["landing-page"],columns:[{name:"Page"},{name:"Sessions",property:"Sessions"}]}})],1),s("div",{staticClass:"dvs-mb-8"},[s("h4",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("Devices")]),s("simple-table",{staticClass:"dvs-w-full",attrs:{data:e.analytics["devices"],columns:[{name:"Date Searched"},{name:"Sessions",property:"Sessions"}]}})],1)]:e._e()],2):s("div",{staticClass:"dvs-p-8"},[s("h2",{staticClass:"dvs-mb-4",style:{color:e.theme.panel.color}},[e._v("To get started select a Site")]),s("fieldset",{staticClass:"dvs-fieldset"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.site,expression:"site"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.site=t.target.multiple?s:s[0]},function(t){return e.retrieveAnalytics()}]}},[s("option",{domProps:{value:null}},[e._v("Select a site")]),e._l(e.sites.data,function(t){return s("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.name))])})],2)])])])])},n=[],i=s("cebc"),l=s("2f62"),o=s("6e12"),r={name:"MothershipAnalytics",data:function(){return{analytics:null,site:null,analyticsDateRange:{start:null,end:null}}},mounted:function(){this.setDefaultAnalytics()},methods:Object(i["a"])({},Object(l["b"])("devise",["getSiteAnalytics"]),{setDefaultAnalytics:function(){var e=new Date,t=new Date;t.setDate(t.getDate()-7),this.analyticsDateRange.start=this.formatDate(t),this.analyticsDateRange.end=this.formatDate(e)},formatColors:function(e){if(e.fontColor=this.theme.panel.color,"undefined"!==typeof this.theme.chartColor1){e.borderColor=[],e.backgroundColor=[],e.pointBackgroundColor=this.theme.chartColor1.color,e.pointBorderColor=this.theme.chartColor1.color;for(var t=1;t<7;t+=1)"undefined"!==typeof this.theme["chartColor".concat(t)]&&(e.borderColor[t]=this.theme["chartColor".concat(t)].color,e.backgroundColor[t]=this.theme["chartColor".concat(t)].color)}else e.borderColor=this.theme.panel.color,e.backgroundColor=this.theme.statsLeft.color,e.pointBackgroundColor=this.theme.statsRight.color,e.pointBorderColor=this.theme.statsRight.color;return e.pointRadius=4,e.pointHoverRadius=4,e.fill=!1,e},retrieveAnalytics:function(){var e=this,t=this;this.mothershipApiKey&&("string"!==typeof this.analyticsDateRange.start&&this.analyticsDateRange.start[0]&&(this.analyticsDateRange.start=this.formatDate(new Date(this.analyticsDateRange.start[0]))),"string"!==typeof this.analyticsDateRange.end&&this.analyticsDateRange.end[0]&&(this.analyticsDateRange.end=this.formatDate(new Date(this.analyticsDateRange.end[0]))),this.getSiteAnalytics({site:this.site.id,dates:this.analyticsDateRange}).then(function(s){for(var a in s.data.sessions.datasets.map(function(e,s){return t.formatColors(e,s)}),s.data.channels.datasets.map(function(e,s){return t.formatColors(e,s)}),s.data.browser.datasets.map(function(e,s){return t.formatColors(e,s)}),s.data["date-searched"])s.data["date-searched"].hasOwnProperty(a)&&(s.data["date-searched"][e.formatDate(a)]=s.data["date-searched"][a],delete s.data["date-searched"][a]);t.$set(t,"analytics",s.data)}))}}),computed:Object(i["a"])({},Object(l["c"])("devise",["mothership","mothershipApiKey","sites"]),{options:function(){return{responsive:!0,maintainAspectRatio:!1,legend:{labels:{fontColor:this.theme.panel.color,fontSize:14}},scales:{yAxes:[{ticks:{fontColor:this.theme.panel.color,fontSize:12}}],xAxes:[{ticks:{fontColor:this.theme.panel.color,fontSize:12}}]}}},barOptions:function(){return{responsive:!0,maintainAspectRatio:!1,legend:{labels:{fontColor:this.theme.panel.color,fontSize:14}},scales:{yAxes:[{ticks:{fontColor:this.theme.panel.color,fontSize:12}}],xAxes:[{ticks:{fontColor:this.theme.panel.color,fontSize:12}}]}}},pieOptions:function(){return{responsive:!0,maintainAspectRatio:!1,legend:{labels:{fontColor:this.theme.panel.color,fontSize:14}}}}}),components:{BarChart:function(){return s.e("devise-charts").then(s.bind(null,"7ba4"))},PieChart:function(){return s.e("devise-charts").then(s.bind(null,"17c5"))},LineChart:function(){return s.e("devise-charts").then(s.bind(null,"379e"))},DatePicker:function(){return s.e("devise-utilities").then(s.bind(null,"7e6e"))},SimpleTable:function(){return s.e("devise-tables").then(s.bind(null,"da40"))}},mixins:[o["a"]]},c=r,d=s("0c7c"),u=Object(d["a"])(c,a,n,!1,null,null,null);t["default"]=u.exports},b06d:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dvs-p-8"},[s("h3",{staticClass:"mb-6",style:{color:e.theme.panel.color}},[e._v("Mothership")]),s("ul",{staticClass:"dvs-list-reset dvs-mt-8"},[s("li",{staticClass:"dvs-cursor-pointer dvs-mb-6 dvs-text-sm uppercase font-bold",on:{click:function(t){return e.goToPage("devise-ms-analytics-index")}}},[e._v("\n            Analytics\n        ")]),s("li",{staticClass:"dvs-cursor-pointer dvs-mb-6 dvs-text-sm uppercase font-bold",on:{click:function(t){return t.preventDefault(),e.goToPage("devise-ms-releases-index")}}},[e._v("\n            Releases\n        ")]),s("li",{staticClass:"dvs-cursor-pointer dvs-mb-6 dvs-text-sm uppercase font-bold",on:{click:function(t){return t.preventDefault(),e.goToPage("devise-ms-healthreports-index")}}},[e._v("\n            Health Report\n        ")]),s("li",{staticClass:"dvs-cursor-pointer dvs-mb-6 dvs-text-sm uppercase font-bold",on:{click:function(t){return t.preventDefault(),e.goToPage("devise-ms-backups-index")}}},[e._v("\n            Backups\n        ")])])])},n=[],i={name:"MothershipIndex"},l=i,o=s("0c7c"),r=Object(o["a"])(l,a,n,!1,null,null,null);t["default"]=r.exports},c3f8:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dvs-flex dvs-justify-end dvs-items-stretch dvs-min-h-screen dvs-relative"},[s("div",{attrs:{id:"devise-admin-content"}},[e._v("It's time to health report!")])])}],i={name:"MothershipHealthReports"},l=i,o=s("0c7c"),r=Object(o["a"])(l,a,n,!1,null,null,null);t["default"]=r.exports},e08b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dvs-flex dvs-justify-end dvs-items-stretch dvs-min-h-screen dvs-relative"},[s("div",{attrs:{id:"devise-admin-content"}},[e._v("It's time to back up!")])])}],i={name:"MothershipBackups"},l=i,o=s("0c7c"),r=Object(o["a"])(l,a,n,!1,null,null,null);t["default"]=r.exports}}]);
//# sourceMappingURL=devise-mothership.dced99d4.js.map