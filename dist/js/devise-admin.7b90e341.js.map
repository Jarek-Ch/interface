{"version":3,"sources":["webpack:///./src/components/admin/Administration.vue?a185","webpack:///src/components/admin/Administration.vue","webpack:///./src/components/admin/Administration.vue?1a27","webpack:///./src/components/admin/Administration.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","deviseOptions","adminClass","attrs","directives","name","rawName","staticClass","_l","menuItem","key","checkActivePanelSidebar","on","$event","preventDefault","loadAdminPage","icon","tag","staticStyle","domProps","csrf_field","value","hideDeviseRootPortal","expression","deviseRootPortalContentChanged","staticRenderFns","data","everythingIsLoaded","mounted","setTimeout","methods","routeName","window","deviseSettings","$bus","$emit","goToPage","routeParams","$route","meta","parentRouteName","pollIfLoggedIn","getLanguages","then","location","reload","content","passengers","computed","allowedAdminMenu","Object","keys","adminMenu","user","$user","axios","defaults","headers","common","components","Loadbar","LoadingScreen","MediaEditor","MediaManager","ForceSave","PreviewMode","BackIcon","CogIcon","CreateIcon","CubeIcon","DocumentIcon","ImageIcon","Panel","PowerIcon","SaveIcon","SliceSettings","component"],"mappings":"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","file":"js/devise-admin.7b90e341.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[_vm.deviseOptions.adminClass],attrs:{\"id\":\"devise-admin\"}},[_c('panel',{directives:[{name:\"tuck\",rawName:\"v-tuck\"}],staticClass:\"dvs-m-8 dvs-fixed dvs-pin dvs-z-9980 dvs-flex dvs-pointer-events-none \"},[_c('div',{staticClass:\"dvs-flex dvs-shadow dvs-flex-col dvs-relative dvs-rounded dvs-bg-admin-bg dvs-pointer-events-auto\"},[_c('preview-mode'),_vm._l((_vm.allowedAdminMenu),function(menuItem,key){return [_c('div',{key:key,staticClass:\"dvs-border-b dvs-border-admin-secondary-bg\"},[_c('button',{staticClass:\"dvs-outline-none dvs-transitions-hover-slow dvs-cursor-pointer dvs-text-admin-fg\",class:_vm.checkActivePanelSidebar(menuItem),on:{\"click\":function($event){$event.preventDefault();return _vm.loadAdminPage(menuItem)}}},[_c(menuItem.icon,{tag:\"component\",staticClass:\"dvs-m-4\",attrs:{\"w\":\"25\",\"h\":\"25\"}})],1)])]}),_c('a',{staticClass:\"dvs-outline-none dvs-transitions-hover-slow dvs-cursor-pointer dvs-text-admin-fg\",attrs:{\"href\":\"/logout}\",\"onclick\":\"event.preventDefault(); document.getElementById('dvs-logout-form').submit();\"}},[_c('power-icon',{staticClass:\"dvs-m-4\",attrs:{\"w\":\"25\",\"h\":\"25\"}})],1),_c('form',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"dvs-logout-form\",\"action\":\"/logout\",\"method\":\"POST\"}},[_c('input',{attrs:{\"type\":\"hidden\",\"name\":\"_token\"},domProps:{\"value\":_vm.csrf_field}})])],2),_c('div',{staticClass:\"dvs-flex dvs-w-full\"},[_c('transition',{attrs:{\"name\":\"dvs-fade\",\"mode\":\"out-in\"}},[_c('router-view',{attrs:{\"name\":\"devise\"}})],1)],1)]),_c('portal-target',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hideDeviseRootPortal),expression:\"!hideDeviseRootPortal\"}],staticClass:\"dvs-fixed dvs-pin dvs-z-9999\",attrs:{\"name\":\"devise-root\"},on:{\"change\":_vm.deviseRootPortalContentChanged}}),_c('media-manager',{staticClass:\"dvs-z-9999\"}),_c('slice-settings'),_c('loadbar',{staticClass:\"dvs-relative dvs-z-9999\"}),_c('loading-screen',{staticClass:\"dvs-relative dvs-z-9999\"}),_c('force-save',{staticClass:\"dvs-relative dvs-z-9999\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    id=\"devise-admin\"\n    :class=\"[deviseOptions.adminClass]\"\n  >\n    <panel\n      class=\"dvs-m-8 dvs-fixed dvs-pin dvs-z-9980 dvs-flex dvs-pointer-events-none \"\n      v-tuck\n    >\n      <div class=\"dvs-flex dvs-shadow dvs-flex-col dvs-relative dvs-rounded dvs-bg-admin-bg dvs-pointer-events-auto\">\n        <preview-mode />\n\n        <template v-for=\"(menuItem, key) in allowedAdminMenu\">\n          <div\n            class=\"dvs-border-b dvs-border-admin-secondary-bg\"\n            :key=\"key\"\n          >\n            <button\n              :class=\"checkActivePanelSidebar(menuItem)\"\n              class=\"dvs-outline-none dvs-transitions-hover-slow dvs-cursor-pointer dvs-text-admin-fg\"\n              @click.prevent=\"loadAdminPage(menuItem)\"\n            >\n              <component\n                v-bind:is=\"menuItem.icon\"\n                class=\"dvs-m-4\"\n                w=\"25\"\n                h=\"25\"\n              ></component>\n            </button>\n          </div>\n        </template>\n        <a\n          href=\"/logout}\"\n          class=\"dvs-outline-none dvs-transitions-hover-slow dvs-cursor-pointer dvs-text-admin-fg\"\n          onclick=\"event.preventDefault(); document.getElementById('dvs-logout-form').submit();\"\n        >\n          <power-icon\n            class=\"dvs-m-4\"\n            w=\"25\"\n            h=\"25\"\n          />\n        </a>\n\n        <form\n          id=\"dvs-logout-form\"\n          action=\"/logout\"\n          method=\"POST\"\n          style=\"display: none;\"\n        >\n          <input\n            type=\"hidden\"\n            name=\"_token\"\n            :value=\"csrf_field\"\n          >\n        </form>\n      </div>\n      <div class=\"dvs-flex dvs-w-full\">\n\n        <transition\n          name=\"dvs-fade\"\n          mode=\"out-in\"\n        >\n          <router-view name=\"devise\"></router-view>\n        </transition>\n      </div>\n    </panel>\n\n    <portal-target\n      class=\"dvs-fixed dvs-pin dvs-z-9999\"\n      v-show=\"!hideDeviseRootPortal\"\n      name=\"devise-root\"\n      @change=\"deviseRootPortalContentChanged\"\n    ></portal-target>\n    <media-manager class=\"dvs-z-9999\" />\n    <slice-settings />\n    <loadbar class=\"dvs-relative dvs-z-9999\" />\n    <loading-screen class=\"dvs-relative dvs-z-9999\" />\n    <force-save class=\"dvs-relative dvs-z-9999\" />\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { mapState, mapActions } from 'vuex';\nimport { setInterval } from 'timers';\n\nexport default {\n  name: 'Administration',\n  data () {\n    return {\n      everythingIsLoaded: false,\n      hideDeviseRootPortal: true\n    };\n  },\n  mounted () {\n    Vue.component('help', () =>\n      import(/* webpackChunkName: \"devise-utilities\" */ '../utilities/Help')\n    );\n\n    setTimeout(() => {\n      this.everythingIsLoaded = true;\n    }, 2000);\n\n    setInterval(() => {\n      this.pollIfLoggedIn()\n    }, 30000);\n  },\n  methods: {\n    ...mapActions('devise', ['getLanguages']),\n    loadAdminPage (menuItem) {\n      if (menuItem.routeName === 'media-manager') {\n        window.deviseSettings.$bus.$emit('devise-launch-media-manager', {});\n      } else if (typeof menuItem.routeParams !== 'undefined') {\n        this.goToPage(menuItem.routeName, menuItem.routeParams);\n      } else {\n        this.goToPage(menuItem.routeName);\n      }\n    },\n    checkActivePanelSidebar (menuItem) {\n      if (this.$route.meta && this.$route.meta.parentRouteName) {\n        if (\n          this.$route.name === 'devise-pages-view' &&\n          this.$route.params.pageId === this.currentPage.id &&\n          menuItem.routeName === 'devise-pages-view'\n        ) {\n          return [' dvs-bg-admin-highlight-bg dvs-text-admin-highlight-fg']\n        }\n\n        if (\n          menuItem.routeName === this.$route.meta.parentRouteName &&\n          (this.$route.name !== 'devise-pages-view' ||\n            this.$route.params.pageId !== this.currentPage.id)\n        ) {\n          return [' dvs-bg-admin-highlight-bg dvs-text-admin-highlight-fg']\n        }\n      }\n\n      return [];\n    },\n    pollIfLoggedIn () {\n      this.getLanguages().then(() => { }, () => {\n        window.location.reload(true)\n      })\n    },\n    deviseRootPortalContentChanged (content) {\n      if (!content.passengers) {\n        this.hideDeviseRootPortal = true\n      } else {\n        this.hideDeviseRootPortal = false\n      }\n    }\n  },\n  computed: {\n    ...mapState('devise', ['adminMenu']),\n    allowedAdminMenu () {\n      return Object.keys(this.adminMenu)\n        .filter((menuItem) => {\n          if (!this.adminMenu[menuItem].permissions) {\n            return true\n          }\n          return this.can(this.adminMenu[menuItem].permissions)\n        })\n        .reduce((obj, key) => {\n          obj[key] = this.adminMenu[key];\n          return obj;\n        }, {});\n    },\n    user () {\n      return window.deviseSettings.$user;\n    },\n    csrf_field () {\n      return window.axios.defaults.headers.common['X-CSRF-TOKEN'];\n    },\n  },\n  components: {\n    Loadbar: () => import(/* webpackChunkName: \"devise-utilities\" */ '../utilities/Loadbar.vue'),\n    LoadingScreen: () =>\n      import(/* webpackChunkName: \"devise-utilities\" */ '../utilities/LoadingScreen.vue'),\n    MediaEditor: () =>\n      import(/* webpackChunkName: \"devise-media\" */ '../media-manager/MediaEditor.vue'),\n    MediaManager: () =>\n      import(/* webpackChunkName: \"devise-media\" */ '../media-manager/MediaManager.vue'),\n    ForceSave: () =>\n      import(/* webpackChunkName: \"devise-utilities\" */ '../utilities/ForceSave.vue'),\n    PreviewMode: () =>\n      import(/* webpackChunkName: \"devise-previewmode\" */ '../pages/PreviewMode.vue'),\n    BackIcon: () =>\n      import(/* webpackChunkName: \"devise-icons\" */ 'vue-feather-icons/icons/ArrowLeftIcon'),\n    CogIcon: () => import(/* webpackChunkName: \"devise-icons\" */ 'vue-feather-icons/icons/SettingsIcon'),\n    CreateIcon: () =>\n      import(/* webpackChunkName: \"devise-icons\" */ 'vue-feather-icons/icons/EditIcon'),\n    CubeIcon: () => import(/* webpackChunkName: \"devise-icons\" */ 'vue-feather-icons/icons/BoxIcon'),\n    DocumentIcon: () =>\n      import(/* webpackChunkName: \"devise-icons\" */ 'vue-feather-icons/icons/ClipboardIcon'),\n    ImageIcon: () =>\n      import(/* webpackChunkName: \"devise-icons\" */ 'vue-feather-icons/icons/ImageIcon'),\n    Panel: () => import(/* webpackChunkName: \"devise-utilities\" */ '../utilities/Panel.vue'),\n    PowerIcon: () =>\n      import(/* webpackChunkName: \"devise-icons\" */ 'vue-feather-icons/icons/PowerIcon'),\n    SaveIcon: () => import(/* webpackChunkName: \"devise-icons\" */ 'vue-feather-icons/icons/SaveIcon'),\n    SliceSettings: () =>\n      import(/* webpackChunkName: \"devise-slices\" */ '../slices/SliceSettings.vue'),\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Administration.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Administration.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Administration.vue?vue&type=template&id=8c0be914&\"\nimport script from \"./Administration.vue?vue&type=script&lang=js&\"\nexport * from \"./Administration.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}